"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9625],{55139:function(e,t,n){n.d(t,{r:function(){return s.Z}});var s=n(87456)},76036:function(e,t,n){n.d(t,{v:function(){return ApproveAndTx}});var s=n(57437),a=n(72009),l=n(81628),r=n(2265),i=n(71424),o=n(56926),c=n(7935),u=n(54415);let d={},useApproves=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:s}=(0,o.mA)(),x=(0,u.uT)(),{data:p}=(0,o.py)(),[m,f]=(0,r.useState)(!1),v=(0,r.useMemo)(()=>Object.keys(e).filter(e=>e!==a.K8),[e]),[b,h]=(0,r.useState)(t&&d[t]||{}),updateAllownce=(e,n)=>{t&&(d[t]={...d[t]||{},[e]:n},h(t=>({...t,[e]:n})))},{data:g}=(0,o.Ov)(),w=(0,o.t_)();(0,r.useEffect)(()=>{s&&t&&v.forEach(e=>{x({abi:c.em,address:e,functionName:"allowance",args:[s,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[v,s,g]);let[j,y]=(0,r.useState)(!1),A=(0,r.useMemo)(()=>v.filter(t=>(0,l.ok)(e,t)>0n&&(0,l.ok)(e,t)>(0,l.ok)(b,t)),[e,v,b]),approve=async()=>{if(0!=A.length&&t)try{y(!0),f(!1);for(let s=0;s<A.length;s++){let a=A[s],l=!1===n?e[a]:n,r=await (null==p?void 0:p.writeContract({abi:c.em,address:a,functionName:"approve",args:[t,l]}));r&&await (null==w?void 0:w.waitForTransactionReceipt({hash:r})),updateAllownce(a,l)}i.A.success("Approve success"),y(!1),f(!0)}catch(e){throw i.A.error((0,l.az)(e)),y(!1),f(!1),e}};return{approve,loading:j,shouldApprove:A.length>0,isSuccess:m}};var x=n(43003),p=n(35769),m=n(72084);function ApproveAndTx(e){let{className:t,tx:n,approves:a,spender:l,requestAmount:i,config:o,toast:c=!0,disabled:u,onTxSuccess:d,onApproveSuccess:f}=e,{write:v,isDisabled:b,isLoading:h}=(0,x.R)({onSuccess:()=>d&&d(),...o},c),g=u||b||h||!1===o.enabled,{approve:w,shouldApprove:j,loading:y,isSuccess:A}=useApproves(a||{},l,i),N=(0,r.useRef)();return(N.current=f,(0,r.useEffect)(()=>{N.current&&A&&N.current()},[A]),j)?(0,s.jsxs)("button",{className:(0,p.m)("btn-primary flex items-center justify-center gap-4",t),onClick:w,disabled:u||!w||y,children:[y&&(0,s.jsx)(m.$,{}),"Approve"]}):(0,s.jsxs)("button",{className:(0,p.m)("btn-primary flex items-center justify-center gap-4",t),onClick:()=>v(),disabled:g,children:[h&&(0,s.jsx)(m.$,{}),n]})}},80547:function(e,t,n){n.d(t,{W:function(){return AssetInput}});var s=n(57437),a=n(81628),l=n(20373),r=n(57042),i=n(2265),o=n(28881),c=n(16775),u=n(51549);function AssetInput(e){let{asset:t="ETH",checkBalance:n=!0,balance:d,balanceTit:x="Balance",balanceDecimals:p=18,exchange:m,readonly:f,selected:v,onClick:b,amount:h,setAmount:g,price:w,disable:j,hasInput:y=!1,options:A,onChange:N=()=>{},defaultValue:S,balanceClassName:k="",disableNegative:T}=e,B=(0,i.useRef)(null),C=n&&void 0!==d&&(0,a.su)("number"==typeof h?h+"":h||"")>("bigint"==typeof d?d:0n);return(0,s.jsxs)("div",{className:"relative w-full",onClick:()=>{b&&!j&&b()},children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"absolute flex items-center h-fit gap-2 left-[48px] bottom-1 w-full  max-w-[calc(100%-56px)]",style:{pointerEvents:"none"},children:[w&&(0,s.jsx)("div",{className:"text-neutral-500 text-xs max-w-full overflow-hidden",children:w}),m&&(0,s.jsxs)("div",{className:"text-slate-500 text-xs max-w-full overflow-hidden",children:["~$",m]})]}),(0,s.jsxs)("div",{className:"absolute flex items-center gap-2 w-fit top-1/2 left-4 -translate-y-1/2",children:[(0,s.jsx)(u.c,{size:24,symbol:t}),(0,s.jsx)("div",{className:(0,r.Z)("relative",w||m?"-top-[6px]":""),children:y?(0,s.jsx)(o.ZP,{options:A,onChange:N,defaultValue:S,styles:{control:(e,t)=>({...e,border:"0px",outline:"none",boxShadow:"none",borderRadius:"0px",minHeight:"24px",padding:"0px",background:"transparent"}),valueContainer:(e,t)=>({...e,padding:"0px"}),menu:(e,t)=>({...e,margin:0}),menuPortal:(e,t)=>({...e,margin:0})}}):(0,s.jsx)("div",{children:t})})]}),(0,s.jsx)("input",{value:h,onChange:e=>{let t=(e.target.value||"").replaceAll("-","").replaceAll("+","");g(t)},ref:B,type:"number",disabled:j,className:(0,r.Z)(f?"bg-slate-50":"bg-white",{"border-green-700 border-2":v,"border-red-400 !border-2 focus:border-red-400":C,"border-slate-400  focus:border-blue-400":!C&&!v},"w-full h-14 text-right pr-4 pl-[8rem] font-bold text-2xl border focus:border-2 text-slate-700 rounded-md outline-none"),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:.01,title:"",readOnly:f})]}),void 0!=d&&(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 text-sm",children:[(0,s.jsxs)("div",{className:k,children:[(0,s.jsxs)("span",{children:[x,": ",(0,l.Rp)(d,3,p)]}),(0,s.jsx)("button",{className:"text-indigo-500 ml-2",onClick:()=>{let e=(0,c.b)(d,p);g(e),b&&!j&&b()},children:"Max"})]}),(0,s.jsx)("div",{className:"text-sm text-red-400",children:C?"Insufficient account balance":""})]})]})}},8332:function(e,t,n){n.d(t,{IS:function(){return useBlastPointsItems},aG:function(){return BlastPointCards}});var s=n(57437),a=n(81628),l=n(51549),r=n(91056),i=n(72009),o=n(23653),c=n(14389),u=n(86825),d=n(78203),x=n(66949),p=n(68497),m=n(20373),f=n(2265),v=n(85686),b=n(34350),h=n(97062),g=n(28278);let w={USB:"rgba(226, 254, 182, 1)",ETHx:"rgba(238, 234, 254, 1)",USDBx:"linear-gradient(90deg, rgba(16, 185, 129, 0.25) 0%, rgba(99, 102, 241, 0.25) 100%)"},j={USB:"rgba(196, 241, 126, 1)",ETHx:"rgba(219, 210, 255, 1)",USDBx:"rgba(255, 255, 255, 1)"};function useBlastPointsItems(){let e=(0,c.p)(),{prices:t,usbApr:n}=(0,f.useContext)(p.g),s=(0,x.a)(),l=(0,u.i)(),o=(0,d.m)(),v=(0,f.useMemo)(()=>{let n=[],l=i.iK[e];if(r.DF.find(t=>t.id==e)){let c=t[i.K8],u=t[i.O1[e]],calcPoint=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100n;return 0n==c?"0":(0,m.Rp)(6504987n*302400n*e*t/c,0,8)};n.push({symbol:"USB",tit:"APY:".concat((0,a.Jh)(o[i.O1[e]],10)," ~ ").concat((0,a.Jh)(o.USB_END,10)),sub:"~ Interest + Earning",point:calcPoint(u),per:100}),l.reduceRight((e,l)=>{let i="ETH"==l.assetTokenSymbol?"ETH GAIN BOOSTER":"APY:".concat((0,a.Jh)(o[l.xTokenAddress],10)),c=l.isStable&&(0,r.WA)()?"~ ".concat(s[l.vault].toFixed(2),"x Blast Native Yield"):"~ ".concat(s[l.vault].toFixed(2),"x Leveraged long on ").concat(l.assetTokenSymbol);return n.push({symbol:l.xTokenSymbol,tit:i,sub:c,point:calcPoint(t[l.xTokenAddress],"ETHx"==l.xTokenSymbol?1n:100n),per:"ETHx"==l.xTokenSymbol?1:100}),e},1)}return n},[e,t,s,n,l]);return v}function BlastPointCard(e){let{symbol:t,tit:n,sub:r,point:u}=e,d=(0,c.p)(),x=(0,f.useMemo)(()=>{var e,n;let s=(0,o.l)(d,!1),l={USB:"USDB",ETHx:"ETH",USDBx:"USDB"},r=null===(e=s.find(e=>e.symbol==l[t]))||void 0===e?void 0:e.address,c=null===(n=s.find(e=>e.symbol==t))||void 0===n?void 0:n.address;if(!r||!c)return"";let convertNative=e=>e==i.K8?"0x0000000000000000000000000000000000000000":e;return(0,a.h$)(convertNative(r),convertNative(c))},[d]);return(0,s.jsxs)("div",{style:{boxShadow:"0px 0px 12px 0px rgba(187, 215, 144, 0.4)"},className:"rounded-2xl overflow-hidden bg-white text-base flex flex-col",children:[(0,s.jsxs)("div",{className:"flex md:flex-wrap items-center p-4 gap-2",style:{background:w[t]},children:[(0,s.jsx)(l.c,{symbol:t,size:42,className:"shrink-0"}),(0,s.jsx)("div",{className:"font-semibold",children:t}),(0,s.jsxs)("div",{className:"whitespace-nowrap text-center text-sm ml-auto flex flex-col items-center flex-1",children:[(0,s.jsx)("div",{className:"rounded-full px-2 py-[2px] w-fit",style:{background:j[t]},children:n}),(0,s.jsx)("div",{className:"mt-1",children:r})]})]}),(0,s.jsxs)("div",{className:"flex justify-between p-4 whitespace-nowrap text-sm items-center gap-2 bg-white",children:[(0,s.jsxs)("div",{className:"font-medium text-indigo-500 self-start text-xs items-center gap-1",children:[(0,s.jsxs)("span",{className:"font-semibold text-sm",children:[u," Blast Points"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["per ","ETHx"==t?1:100," ",(0,s.jsx)(l.c,{symbol:t,size:14})," /Week"]})]}),(0,s.jsxs)("a",{className:"underline text-slate-500 flex items-center gap-1",href:x,target:"_blank",children:["Swap on Thruster ",(0,s.jsx)(v.Ig3,{})]})]})]})}function BlastPointCards(){let e=useBlastPointsItems(),[t,{width:n}]=(0,b.Z)(),a=n<768;return 0==e.length?null:(0,s.jsxs)("div",{ref:t,className:"grid grid-cols-1 md:grid-cols-3 gap-5 md:pb-[60px]",children:[!a&&e.map(e=>(0,s.jsx)(BlastPointCard,{...e},e.symbol)),a&&(0,s.jsx)(g.tq,{spaceBetween:20,pagination:{clickable:!0,renderBullet:function(e,t){return'<div class="'+t+'"></div>'}},className:"-translate-x-[1rem] !px-4 !pb-10 !w-screen",modules:[h.tl],children:e.map(e=>(0,s.jsx)(g.o5,{children:(0,s.jsx)(BlastPointCard,{...e})},e.symbol))})]})}},78203:function(e,t,n){n.d(t,{m:function(){return useTokenApys}});var s=n(81628),a=n(23862),l=n(86825),r=n(66949),i=n(2265),o=n(68497),c=n(14389),u=n(72009),d=n(43977);function useTokenApys(){let e=(0,a.b)(()=>(0,s.Yb)({},0n)),t=(0,c.p)(),{prices:n,usbApr:x,stableVaultsState:p}=(0,i.useContext)(o.g),m=(0,r.a)(),f=(0,l.i)();return(0,i.useMemo)(()=>{let n=u.iK[t],a=(0,s.ok)(f[n[0].ptyPoolBelowAddress],"staking");e[u.O1[t]]=x.apr,e.USB_END=x.apr+a;let l=(0,d.v)("0.15",10);return n.forEach(t=>{if(t.assetTokenAddress!=u.K8){let n=m[t.vault]>1n?(0,d.v)("".concat((m[t.vault]-1).toFixed(2)),10):0n,s=(0,d.v)("1",10);e[t.xTokenAddress]=(n*(l-x.apr)+l*s)/s}}),null},[t,n,m,x,f,p]),e}},66949:function(e,t,n){n.d(t,{a:function(){return useValutsLeverageRatio},z:function(){return useVaultLeverageRatio}});var s=n(72009),a=n(81628),l=n(68497),r=n(2265),i=n(14389),o=n(23862);function useVaultLeverageRatio(e){let{vaultsState:t,stableVaultsState:n}=(0,r.useContext)(l.g),s=t[(null==e?void 0:e.vault)||"null"],i=n[(null==e?void 0:e.vault)||"null"],o=(null==e?void 0:e.isStable)?(0,a.pF)(i.aar,i.AARDecimals):(0,a.pF)(s.aar,s.AARDecimals);return Math.max(0,1+1/(o-1))}function useValutsLeverageRatio(){let{vaultsState:e,stableVaultsState:t}=(0,r.useContext)(l.g),n=(0,i.p)(),c=s.iK[n],u=(0,o.b)(()=>new Proxy({},{get:function(e,t){return t in e&&null!==e[t]&&void 0!==e[t]?e[t]:0}}));return c.forEach(n=>{let s=e[(null==n?void 0:n.vault)||"null"],l=t[(null==n?void 0:n.vault)||"null"],r=(null==n?void 0:n.isStable)?(0,a.pF)(l.aar,l.AARDecimals):(0,a.pF)(s.aar,s.AARDecimals);u[n.vault]=Math.max(0,1+1/(r-1))}),u}},43003:function(e,t,n){n.d(t,{R:function(){return useWrapContractWrite}});var s=n(81628),a=n(2265),l=n(71424),r=n(56926),i=n(54415);function useWrapContractWrite(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[n,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),d=(0,r.t_)(),{data:x}=(0,r.py)(),p=!d||!x||!x.account||n||!e||"object"==typeof e&&!1==e.enabled,m=(0,i.hp)(),write=async()=>{if(!p){o(!0),u(!1);try{let n="function"==typeof e?await e():e,{request:s}=await d.simulateContract({account:x.account,...n}),a=await x.writeContract(s),r=await d.waitForTransactionReceipt({hash:a});if("success"!==r.status)throw"Transaction reverted";u(!0),n.onSuccess&&n.onSuccess({}),t&&l.A.success("Transaction success"),m.update()}catch(e){t&&l.A.error((0,s.az)(e))}o(!1)}};return{write,isDisabled:p,isLoading:n,isSuccess:c}}}}]);