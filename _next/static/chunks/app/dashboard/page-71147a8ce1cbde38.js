(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{38946:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var l=t(55731),a=t(64103),n=t(86960),r=t(52100),i=t(13012),d=t(40460);let c=(0,i.fn)("Divider"),o=a.forwardRef((e,s)=>{let{className:t}=e,i=(0,l.__rest)(e,["className"]);return a.createElement("div",Object.assign({ref:s,className:(0,d.q)(c("root"),"w-full mx-auto","bg-tremor-background-subtle","dark:bg-dark-tremor-background-subtle",n.N.threeXs.height,r.W.threeXl.marginTop,r.W.threeXl.marginBottom,t)},i))});o.displayName="Divider"},73347:function(e,s,t){Promise.resolve().then(t.bind(t,70294))},70294:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Dashboard}});var l=t(31113),a=t(35664),n=t(33621),r=t(6371),i=t(19757),d=t(22139),c=t(59175),o=t(5035),m=t(26361),x=t(75930),u=t(84944),h=t(38946),b=t(62653),f=t(55731),j=t(64103),p=t(13012),v=t(40460);let N=(0,p.fn)("Table"),g=j.forwardRef((e,s)=>{let{children:t,className:l}=e,a=(0,f.__rest)(e,["children","className"]);return j.createElement("div",{className:(0,v.q)(N("root"),"overflow-auto",l)},j.createElement("table",Object.assign({ref:s,className:(0,v.q)(N("table"),"w-full tabular-nums text-tremor-default","text-tremor-content","dark:text-dark-tremor-content")},a),t))});g.displayName="Table";let k=(0,p.fn)("TableBody"),y=j.forwardRef((e,s)=>{let{children:t,className:l}=e,a=(0,f.__rest)(e,["children","className"]);return j.createElement(j.Fragment,null,j.createElement("tbody",Object.assign({ref:s,className:(0,v.q)(k("root"),"align-top overflow-x-auto divide-y","divide-tremor-border","dark:divide-dark-tremor-border",l)},a),t))});y.displayName="TableBody";var T=t(52100);let w=(0,p.fn)("TableCell"),S=j.forwardRef((e,s)=>{let{children:t,className:l}=e,a=(0,f.__rest)(e,["children","className"]);return j.createElement(j.Fragment,null,j.createElement("td",Object.assign({ref:s,className:(0,v.q)(w("root"),"align-middle whitespace-nowrap tabular-nums text-left",T.W.twoXl.paddingAll,l)},a),t))});S.displayName="TableCell";let C=(0,p.fn)("TableHead"),A=j.forwardRef((e,s)=>{let{children:t,className:l}=e,a=(0,f.__rest)(e,["children","className"]);return j.createElement(j.Fragment,null,j.createElement("thead",Object.assign({ref:s,className:(0,v.q)(C("root"),"text-left","text-tremor-content","dark:text-dark-tremor-content",l)},a),t))});A.displayName="TableHead";let q=(0,p.fn)("TableHeaderCell"),B=j.forwardRef((e,s)=>{let{children:t,className:l}=e,a=(0,f.__rest)(e,["children","className"]);return j.createElement(j.Fragment,null,j.createElement("th",Object.assign({ref:s,className:(0,v.q)(q("root"),"sticky whitespace-nowrap text-left font-semibold","text-tremor-content","dark:text-dark-tremor-content",T.W.none.top,T.W.twoXl.paddingX,T.W.xl.paddingY,l)},a),t))});B.displayName="TableHeaderCell";let _=(0,p.fn)("TableRow"),E=j.forwardRef((e,s)=>{let{children:t,className:l}=e,a=(0,f.__rest)(e,["children","className"]);return j.createElement(j.Fragment,null,j.createElement("tr",Object.assign({ref:s,className:(0,v.q)(_("row"),l)},a),t))});E.displayName="TableRow";var F=t(41690),P=t.n(F),D=t(72366);let TableCell=e=>(0,l.jsx)(S,{...e,className:"!p-3 w-max ".concat(e.className)}),z=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,l.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})}),R=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,l.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#FF3D3D",strokeWidth:"4"})});function Dashboard(){let e=(0,c.p)(),s=i.iK[e]||[],t=i.VQ[e]||[],{prices:f,assetLocked:p,vaultUSBTotal:v,balances:N,earns:k,vaultsState:T,vaultsMode:w,vaultsDiscount:S,stableVaultsState:C,usbApr:q,plainVaultsStat:_}=(0,j.useContext)(x.g),{address:F}=(0,D.m)(),U=N[i.O1[e]],O=Object.values(k).filter(e=>"USB"==e.stakeSymbol).reduce((e,s)=>e+s.stake,0n),V=U+O,W=s.filter(e=>!e.isStable).reduce((e,s)=>e+k[s.ptyPoolAboveAddress].stake*f[s.assetTokenAddress]/d.Pq,0n),M=BigInt(q.aprDecimals),L=M>0n?V*q.apr/10n**M/365n:0n,H=(0,m.Jh)(q.apr,q.aprDecimals),{tvl:Z,tvlItems:X}=(0,o.w)(),I=(0,o.R)(),$=t.reduce((e,s)=>e+_[s.vault].userStaked*f[s.assetToken]/d.Pq,0n),Y=s.reduce((e,s)=>{let{xTokenAddress:t}=s;return e+N[t]*f[t]/d.Pq},V+W+$);return(0,l.jsxs)("div",{className:"max-w-screen-xl px-4 mx-auto",children:[(0,l.jsx)("div",{className:"mb-4 page-title",children:"Protocol Overview"}),(0,l.jsxs)(b.Z,{numItemsSm:2,className:"gap-3",children:[(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"page-sub",children:"Total Value Locked"}),(0,l.jsxs)("div",{className:"text-xl font-semibold text-indigo-500 dark:text-violet-300",children:["$",(0,u.dq)(Z+I)]})]}),(0,l.jsx)(h.Z,{className:"my-4 h-[1px] dark:bg-zinc-600"}),(0,l.jsxs)(g,{className:"text-[14px] dark:text-slate-50",children:[(0,l.jsx)(A,{children:(0,l.jsxs)(E,{children:[(0,l.jsx)(B,{children:"Assets"}),(0,l.jsx)(B,{children:"NAV"}),(0,l.jsx)(B,{children:"Amount"})]})}),(0,l.jsx)(y,{className:"",children:X.map(e=>{let{symbol:s,name:t,address:a,price:n,amount:r}=e;return(0,l.jsxs)(E,{className:"dark:border-transparent",children:[(0,l.jsxs)(TableCell,{className:"flex items-center gap-2",children:[(0,l.jsx)(P(),{width:24,height:24,src:"/".concat(s,".svg"),alt:""}),t]}),(0,l.jsxs)(TableCell,{children:["$",(0,u.dq)(n)]}),(0,l.jsx)(TableCell,{children:(0,u.dq)(r)})]},t)})})]})]}),(0,l.jsxs)("div",{className:"relative px-0 pb-0 overflow-hidden border card",children:[(0,l.jsxs)("div",{className:"px-[1.5rem]",children:[(0,l.jsx)("div",{className:"page-sub",children:"My Account"}),(0,l.jsxs)("div",{className:"text-xl font-semibold text-indigo-500 dark:text-violet-300",children:["$",(0,u.dq)(Y)]})]}),(0,l.jsx)("div",{className:"px-[1.5rem]",children:(0,l.jsx)(h.Z,{className:"my-4 h-[1px] dark:bg-zinc-600"})}),!F&&(0,l.jsx)("div",{className:"w-full h-[108px] md:h-[50%] flex justify-center items-center",children:(0,l.jsx)(a.Z,{})}),F&&s.length>0&&(0,l.jsx)("div",{className:"w-full overflow-x-auto ",children:(0,l.jsxs)("div",{className:"w-max min-w-[100%]",children:[(0,l.jsxs)(g,{className:"min-w-[100%] w-fit  px-[1.5rem] text-[14px] ",children:[(0,l.jsx)(A,{children:(0,l.jsxs)(E,{children:[(0,l.jsx)(B,{children:"Assets"}),(0,l.jsx)(B,{children:"Balance"}),(0,l.jsx)(B,{children:"Open Position"}),(0,l.jsx)(B,{children:(0,l.jsxs)("div",{className:"flex items-center",children:["Margin Loan",(0,l.jsx)(r.C,{children:"Repay your margin loan to redeem the asset corresponding to your open position."})]})})]})}),(0,l.jsx)(y,{children:s.map((e,s)=>{let t=e.xTokenSymbol,a=(0,m.ok)(N,e.xTokenAddress),r=T[e.vault],i=C[e.vault],d=e.isStable?i.M_USDCx:r.M_ETHx,c=e.isStable?i.M_USDC:r.M_ETH,o=e.isStable?i.M_USB_USDC:r.M_USB_ETH,x=d>0n?a*c/d:0n,h=d>0n?-(a*o)/d:0n;return(0,l.jsx)(j.Fragment,{children:(0,l.jsxs)(E,{className:"dark:border-transparent",children:[(0,l.jsxs)(TableCell,{className:"flex items-center gap-2",children:[(0,l.jsx)(n.c,{symbol:t,size:24}),t+e.version]}),(0,l.jsx)(TableCell,{children:(0,u.dq)(a)}),(0,l.jsxs)(TableCell,{className:"flex items-center gap-1",children:[(0,l.jsx)(n.c,{symbol:e.assetTokenSymbol,size:20})," ",(0,u.dq)(x)]}),(0,l.jsxs)(TableCell,{children:["$",(0,u.dq)(h)]})]})},t+s)})})]}),(0,l.jsxs)("div",{className:"w-full mt-[50px] flex flex-col text-sm text-gray-500 justify-between gap-3 py-5 px-9 bg-zinc-200 dark:bg-zinc-900 dark:text-slate-50",children:[(0,l.jsxs)("div",{className:"flex items-center w-full gap-2",children:[s.filter(e=>!e.isStable&&e.ptyPoolAboveAddress).map((e,s)=>{let t=e.assetTokenSymbol,a=k[e.ptyPoolAboveAddress].stake;return(0,l.jsxs)(j.Fragment,{children:[(0,l.jsx)(n.c,{size:24,symbol:t,className:s>0?"ml-auto":""}),(0,l.jsx)("div",{children:t}),(0,l.jsxs)("div",{className:s>0?"mr-auto":"",children:["Staked:",(0,u.dq)(a)]})]},"sell_hight_stake"+s)}),t.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.c,{size:24,symbol:"weETH",className:"ml-auto"}),(0,l.jsx)("div",{children:"weETH"}),(0,l.jsxs)("div",{className:"mr-auto",children:["Deposited:",(0,u.dq)(_[t[0].vault].userStaked)]})]})]}),(0,l.jsxs)("div",{className:"w-fit",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(n.c,{size:24,symbol:"USB"}),(0,l.jsx)("div",{children:"USB"}),(0,l.jsx)("div",{children:(0,u.dq)(V)}),(0,l.jsxs)("div",{children:["(Staked:",(0,u.dq)(O),")"]}),(0,l.jsxs)("div",{className:"text-[#10B981] text-sm font-medium",children:["+",(0,u.dq)(L),"(APY:",H,")"]})]}),(0,l.jsx)("div",{className:"text-right text-[#64748B] dark:text-slate-50/60 text-xs font-medium",children:"Estimated increase in 24 hours"})]})]})]})})]})]}),(0,l.jsx)(b.Z,{numItemsSm:1,className:"gap-3 mt-[30px]",children:(0,l.jsx)("div",{className:"border card",children:(0,l.jsxs)(g,{className:"text-[14px]",children:[(0,l.jsx)(A,{children:(0,l.jsxs)(E,{children:[(0,l.jsx)(B,{className:"font-medium",children:"Vaults"}),(0,l.jsx)(B,{className:"font-medium",children:"Total Deposit"}),(0,l.jsx)(B,{className:"font-medium",children:"USB Debt"}),(0,l.jsxs)(B,{className:"font-medium",children:["AAR",(0,l.jsx)(r.C,{children:"Asset Adequacy Ratio"})]}),(0,l.jsx)(B,{className:"font-medium",children:"Status"}),(0,l.jsx)(B,{className:"font-medium",children:"Discount Offer"})]})}),(0,l.jsxs)(y,{className:"text-black dark:text-slate-50",children:[s.map((e,s)=>(0,l.jsxs)(E,{className:"dark:border-zinc-600",children:[(0,l.jsxs)(TableCell,{className:"flex items-center gap-2 text-[16px] font-semibold",children:[(0,l.jsx)(n.c,{symbol:e.assetTokenSymbol,size:24}),e.assetTokenSymbol+e.version]}),(0,l.jsx)(TableCell,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-[14px] font-medium",children:[(0,l.jsx)(n.c,{symbol:e.assetTokenSymbol,size:14}),(0,u.dq)(p[e.assetTokenAddress])]}),(0,l.jsxs)("div",{className:"text-[#64738B] dark:text-slate-50/60 text-xs font-medium",children:["~$",(0,u.dq)(f[e.assetTokenAddress]*p[e.assetTokenAddress]/d.Pq)]})]})}),(0,l.jsxs)(TableCell,{className:"flex items-center gap-2 text-[14px] font-medium",children:[(0,l.jsx)(n.c,{symbol:"USB",size:14}),(0,u.dq)(v[e.vault])]}),(0,l.jsx)(TableCell,{className:"text-[14px] font-medium",children:e.isStable?(0,m.Rr)(C[e.vault].aar,C[e.vault].AARDecimals):(0,m.Rr)(T[e.vault].aar,T[e.vault].AARDecimals)}),(0,l.jsx)(TableCell,{children:(0,l.jsx)("div",{className:"flex items-center text-[14px] font-medium",children:w[e.vault]<=1?(0,l.jsxs)(l.Fragment,{children:[z," ",(0,l.jsx)("span",{className:"ml-[5px]",children:"Stability"})]}):(0,l.jsxs)(l.Fragment,{children:[R," ",(0,l.jsx)("span",{className:"ml-[5px]",children:"Adjustment"})]})})}),(0,l.jsx)(TableCell,{children:(0,l.jsx)("div",{className:"flex items-center text-[14px] font-medium",children:S[e.vault]?(0,l.jsxs)(l.Fragment,{children:[R," ",(0,l.jsx)("span",{className:"ml-[5px]",children:"Yes"})]}):(0,l.jsxs)(l.Fragment,{children:[z," ",(0,l.jsx)("span",{className:"ml-[5px]",children:"No"})]})})})]},e.assetTokenSymbol+s)),t.map((e,s)=>(0,l.jsxs)(E,{className:"dark:border-zinc-600",children:[(0,l.jsxs)(TableCell,{className:"flex items-center gap-2 text-[16px] font-semibold",children:[(0,l.jsx)(n.c,{symbol:e.assetTokenSymbol,size:24}),e.assetTokenSymbol]}),(0,l.jsx)(TableCell,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-[14px] font-medium",children:[(0,l.jsx)(n.c,{symbol:e.assetTokenSymbol,size:14}),(0,u.dq)(_[e.vault].totalSupply)]}),(0,l.jsxs)("div",{className:"text-[#64738B] dark:text-slate-50/60  text-xs font-medium",children:["~$",(0,u.dq)(f[e.assetToken]*_[e.vault].totalSupply/d.Pq)]})]})}),(0,l.jsxs)(TableCell,{className:"flex items-center gap-2 text-[14px] font-medium",children:[(0,l.jsx)(n.c,{symbol:"USB",size:14}),(0,u.dq)(v[e.vault])]}),(0,l.jsx)(TableCell,{className:"text-[14px] font-medium",children:"n/a"}),(0,l.jsx)(TableCell,{className:"text-[14px] font-medium",children:"n/a"}),(0,l.jsx)(TableCell,{className:"text-[14px] font-medium",children:"n/a"})]},e.assetTokenSymbol+s))]})]})})})]})}},33621:function(e,s,t){"use strict";t.d(s,{c:function(){return CoinIcon}});var l=t(31113);function CoinIcon(e){let{symbol:s,size:t=48,...a}=e;return(0,l.jsx)("img",{...a,width:t,height:t,src:"/".concat(s,".svg"),alt:s})}},35664:function(e,s,t){"use strict";t.d(s,{Z:function(){return ConnectBtn}});var l=t(31113),a=t(28767),n=t(44726);function ConnectBtn(){return(0,n.Z)(1024),(0,l.jsx)(a.NL,{chainStatus:"none",showBalance:!1})}},6371:function(e,s,t){"use strict";t.d(s,{C:function(){return Tip}});var l=t(31113),a=t(26361),n=t(52653),r=t(66733);function Tip(e){let{children:s,node:t,className:i,inFlex:d}=e,c=document.getElementById("tooltip-root");return s?(0,l.jsx)(n.zt,{children:(0,l.jsxs)(n.fC,{children:[(0,l.jsx)(n.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:t?(0,l.jsx)("div",{className:(0,a.cn)("inline-block cursor-default",i),style:{verticalAlign:"text-bottom"},children:t}):(0,l.jsx)("div",{className:(0,a.cn)(d?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",i),children:(0,l.jsx)(r.apP,{className:"inline-block stroke-slate-500"})})}),(0,l.jsx)(n.h_,{container:c,children:(0,l.jsxs)(n.VY,{className:"max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",children:[s,(0,l.jsx)(n.Eh,{})]})})]})}):t}},5035:function(e,s,t){"use strict";t.d(s,{R:function(){return useTVLV1},w:function(){return useTVL}});var l=t(19757),a=t(59175),n=t(64103),r=t(75930),i=t(22139),d=t(15506),c=t(26504),o=t(26361);function useTVLV1(){var e,s;let t=(0,a.p)(),m=null===(e=l.Lh[t])||void 0===e?void 0:e[0],x=null===(s=l.Lh[t])||void 0===s?void 0:s[1],{prices:u}=(0,n.useContext)(r.g),{data:h}=(0,d.uX)({contracts:[{abi:c.Wn,address:l.O6[t],functionName:"getVaultState",args:[null==m?void 0:m.vault]},{abi:c.Wn,address:l.O6[t],functionName:"getStableVaultState",args:[null==x?void 0:x.vault]},{abi:c.aT,address:null==m?void 0:m.ptyPoolAboveAddress,functionName:"totalStakingBalance"}]}),b=(0,o.ok)(h,[0,"result","M_ETH"]),f=(0,o.ok)(h,[1,"result","M_USDC"]),j=(0,o.ok)(h,[2,"result"]);return(b+j)*u[l.K8]/i.Pq+f*u[null==x?void 0:x.assetTokenAddress]/i.Pq}function useTVL(){let e=(0,a.p)(),s=l.iK[e],t=l.VQ[e]||[],{earns:d,prices:c,totalSupplies:o,vaultUSBTotal:m,plainVaultsStat:x}=(0,n.useContext)(r.g),u=s.map(e=>m[e.vault]).reduce((e,s)=>e+s,0n),h=[{name:"USB",symbol:"USB",address:l.O1[e]}].concat(s.map(e=>({name:e.xTokenSymbol+e.version,symbol:e.xTokenSymbol,address:e.xTokenAddress}))).map(e=>{let s=c[e.address],t="USB"==e.symbol?u:o[e.address],l=s*t/i.Pq;return{...e,price:s,amount:t,usdAmount:l}}).concat(s.filter(e=>!e.isStable).map(e=>{console.info("earns:",d[e.ptyPoolAboveAddress]);let s=d[e.ptyPoolAboveAddress].totalStake+d[e.ptyPoolBelowAddress].balance,t=c[e.assetTokenAddress],l=t*s/i.Pq;return{name:e.assetTokenSymbol+e.version,symbol:e.assetTokenSymbol,address:e.assetTokenAddress,price:t,amount:s,usdAmount:l}})).concat(t.map(e=>{let s=c[e.assetToken],t=x[e.vault].totalSupply,l=s*t/i.Pq;return{name:e.assetTokenSymbol,symbol:e.assetTokenSymbol,address:e.assetToken,price:s,amount:t,usdAmount:l}})),b=h.reduce((e,s)=>e+s.usdAmount,0n);return{tvl:b,tvlItems:h}}},84944:function(e,s,t){"use strict";t.d(s,{Rp:function(){return displayBalanceWithUnit},ZM:function(){return displayBalanceWithoutFormat},dq:function(){return displayBalance}});var l=t(7530),a=t(53060);let displayBalanceWithUnit=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,t=arguments.length>2?arguments[2]:void 0;if(!e)return"0";let a=10**s,n=Math.floor(Number((0,l.b)(e,t))*a)/a,r=Number((.1**s).toFixed(s));return n>0&&n<r?"<"+r:n<0&&n>-r?"≈0":n.toLocaleString("en-US",{maximumFractionDigits:s})},displayBalance=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return"0";let l=Number((0,a.d)(e)),n=Number((.1**s).toFixed(s));return l>0&&l<n?"<"+n:l<0&&l>-n?"≈0":l.toLocaleString("en-US",{...t||{},maximumFractionDigits:s})},displayBalanceWithoutFormat=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!e)return"0";let t=10**s,l=Math.floor(Number((0,a.d)(e))*t)/t,n=Number((.1**s).toFixed(s));return l>0&&l<n?"<"+n:l<0&&l>-n?"≈0":String(l)}}},function(e){e.O(0,[7495,4176,5169,4659,8836,1996,7869,1690,8347,2361,1578,7638,7093,604,1744],function(){return e(e.s=73347)}),_N_E=e.O()}]);